(()=>{"use strict";const e=window.wc.blocksCheckout,t=JSON.parse('{"apiVersion":2,"name":"pakettikauppa/pickup-point-selection-cart","version":"1.0.0","title":"Posti pickup point information","category":"woocommerce","description":"Allow to add components for Pakettikauppa shipping method on Cart page","parent":["woocommerce/cart-order-summary-block"],"supports":{"html":false,"align":false,"multiple":false,"reusable":false,"lock":false},"attributes":{"lock":{"type":"object","default":{"remove":false,"move":false}}},"textdomain":"woo-pakettikauppa"}'),a=window.React,o=window.wp.element,p=window.wp.data,i=window.wp.i18n,s=wcSettings["posti-blocks_data"].txt,n=((0,i.__)("Block options","woo-pakettikauppa"),(0,i.__)("Pickup point","woo-pakettikauppa"),(0,i.__)("Select a pickup point","woo-pakettikauppa"),(0,i.__)("No pickup point: Send to the street address","woo-pakettikauppa"),(0,i.__)("Other","woo-pakettikauppa"),(0,i.__)("Please choose a pickup point","woo-pakettikauppa"),(0,i.__)("No pickup points were found. Check the address.","woo-pakettikauppa"),(0,i.__)("You can choose the pickup point on the Checkout page","woo-pakettikauppa"),(0,i.__)("Choose one of pickup points close to the address you entered","woo-pakettikauppa"),(0,i.__)("Custom pickup address","woo-pakettikauppa"),(0,i.__)("If none of your preferred pickup points are listed, fill in a custom address above and select another pickup point","woo-pakettikauppa"),(0,i.__)("After entering, please wait for a while for the results to be received","woo-pakettikauppa"),(0,i.__)("The value is too short","woo-pakettikauppa"),(0,i.__)("Invalid character entered","woo-pakettikauppa"),(0,i.__)("The selection of pickup points has been changed based on the address %s","woo-pakettikauppa"),()=>wcSettings&&wcSettings["posti-blocks_data"]?wcSettings["posti-blocks_data"]:[]);(0,e.registerCheckoutBlock)({metadata:t,component:({className:e})=>{const[t,i]=(0,o.useState)(!1),[c,r]=(0,o.useState)([]),[l,k]=(0,o.useState)(""),u=(0,p.useSelect)((e=>e("wc/store/cart").getCartData().shippingRates));return(0,o.useEffect)((()=>{u.length&&r((e=>{if(!e.length)return[];let t=[];for(let a=0;a<e.length;a++)if(e[a].shipping_rates)for(let o=0;o<e[a].shipping_rates.length;o++)e[a].shipping_rates[o].rate_id&&t.push(e[a].shipping_rates[o]);return t})(u))}),[u]),(0,o.useEffect)((()=>{if(c.length)for(let e=0;e<c.length;e++)if(c[e].selected){k(c[e].rate_id);break}}),[c]),(0,o.useEffect)((()=>{if(i(!1),""!==l){let e=n();if("pickup_methods"in e){let t=l.split(":");if(t.length<2)return;let a=+t[1];if(isNaN(a))return;if(!e.pickup_methods.includes(a))return;i(!0)}}}),[l]),t?(0,a.createElement)("div",{className:"wc-block-components-totals-wrapper"},(0,a.createElement)("span",{className:"wc-block-components-totals-item"},s.cart_pickup_info)):(0,a.createElement)(a.Fragment,null)}})})();